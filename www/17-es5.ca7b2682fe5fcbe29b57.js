function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function _createClass(t,n,a){return n&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[17,18],{"8I4O":function(t,n,a){"use strict";a.d(n,"a",(function(){return u}));var e=a("mrSG"),i=a("AzuR"),o=a("fXoL"),c=a("TEn/"),s=a("ofXK"),r=a("tk/3"),l=a("3Pt+");function d(t,n){if(1&t){var a=o.Nb();o.Mb(0,"ion-content"),o.Mb(1,"div",1),o.Kb(2,"img",2),o.Mb(3,"h2"),o.ic(4),o.Lb(),o.Mb(5,"h4"),o.ic(6,"#"),o.Mb(7,"span"),o.ic(8),o.Lb(),o.Lb(),o.Lb(),o.Mb(9,"ion-card",3),o.Mb(10,"ion-card-content",4),o.Mb(11,"div"),o.ic(12),o.Lb(),o.Mb(13,"div"),o.ic(14),o.Lb(),o.Lb(),o.Lb(),o.Mb(15,"ion-card"),o.Mb(16,"ion-card-content"),o.Mb(17,"form",5,6),o.Ub("ngSubmit",(function(){o.ec(a);var t=o.dc(18);return o.Wb().addAmount(t)})),o.Kb(19,"ion-input",7),o.Mb(20,"div",8),o.Kb(21,"ion-icon",9),o.Kb(22,"ion-datetime",10),o.Lb(),o.Mb(23,"ion-button",11),o.ic(24," Add transaction "),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Lb()}if(2&t){var e=o.dc(18),i=o.Wb();o.zb(4),o.jc(i.fisherman.name),o.zb(4),o.jc(i.fisherman.id),o.zb(4),o.kc(" Paid Rs. ",i.paid," "),o.zb(2),o.kc(" Balance Rs.",i.Balance," "),o.zb(9),o.Zb("disabled",e.invalid)}}var u=function(){var t=function(){function t(n,a,e,i,o){_classCallCheck(this,t),this.modalController=n,this.datePipe=a,this.navParams=e,this.http=i,this.toastController=o,this.weight=[],this.rate=[],this.tmp=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.paid=0,console.log(this.navParams),this.dataValue=this.navParams,this.http.get("".concat(i.a.FISHERMAN,"/").concat(this.navParams.data[0],"?access_token=").concat(this.navParams.data[1].id)).subscribe((function(n){console.log(n),t.fisherman=n})),this.http.get("".concat(i.a.FISHERMAN,"/").concat(this.navParams.data[0],"/wasteCollecteds?access_token=").concat(this.navParams.data[1].id)).subscribe((function(n){console.log(n),t.wasteCollected=n})),this.http.get("".concat(i.a.FISHERMAN,"/").concat(this.navParams.data[0],"/transactions?access_token=").concat(this.navParams.data[1].id)).subscribe((function(n){console.log(n),t.transactions=n,t.amount=t.transactions[0].amount,t.transactions.forEach((function(n){n.amount.forEach((function(n){t.paid=t.paid+n.Amount}))})),t.Balance=n[0].balance,t.calcttl()}))}},{key:"calcttl",value:function(){var t=this;null!=this.wasteCollected&&null!=this.transactions&&(this.amount=this.transactions[0].amount,this.http.get("".concat(i.a.FISHERMAN,"/").concat(this.navParams.data[0],"/transactions?access_token=").concat(this.navParams.data[1].id)).subscribe((function(n){console.log(n),t.transactions.forEach((function(n){n.amount.forEach((function(n){t.paid=t.paid+n.Amount}))})),t.Balance=n[0].balance})))}},{key:"addAmount",value:function(t){var n;this.amount.push({Amount:t.form.value.Amount,transactionDate:t.form.value.transactionDate}),n=this.transactions[0].balance-t.form.value.Amount,console.log(t.form.value),this.Balance&&this.http.patch("".concat(i.a.TRANSACTION,"/").concat(this.transactions[0].id,"?access_token=").concat(this.navParams.data[1].id),{balance:n,amount:this.amount}).subscribe((function(t){console.log(t)})),this.closeModalNodata()}},{key:"closeModalNodata",value:function(){return Object(e.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Close"),t.next=3,this.modalController.dismiss();case 3:case"end":return t.stop()}}),t,this)})))}}]),t}();return t.\u0275fac=function(n){return new(n||t)(o.Jb(c.z),o.Jb(s.d),o.Jb(c.A),o.Jb(r.a),o.Jb(c.F))},t.\u0275cmp=o.Db({type:t,selectors:[["app-add-amount"]],decls:5,vars:1,consts:[[4,"ngIf"],[1,"fisherman"],["src","../../assets/patient-1.png","width","150px"],[2,"min-height","50px"],[2,"display","flex","justify-content","space-evenly"],[2,"padding","5px","width","85%",3,"ngSubmit"],["form","ngForm"],["name","Amount","type","number","placeholder","Enter Amount","ngModel","","required","",1,"bg-white","rounded-lg","text-sm","overflow-hidden","mb-3"],[2,"display","flex","align-items","center"],["size","large","name","calendar"],["displayFormat","MMM DD, YYYY","name","transactionDate","placeholder","Date","ngModel",""],["mode","ios","color","primary","size","medium","type","submit","expand","block",3,"disabled"]],template:function(t,n){1&t&&(o.Mb(0,"ion-header"),o.Mb(1,"ion-toolbar"),o.Mb(2,"ion-title"),o.ic(3,"Add Transaction"),o.Lb(),o.Lb(),o.Lb(),o.hc(4,d,25,5,"ion-content",0)),2&t&&(o.zb(4),o.Zb("ngIf",n.fisherman))},directives:[c.j,c.v,c.u,s.j,c.g,c.c,c.d,l.i,l.e,l.f,c.l,c.B,l.d,l.g,l.h,c.k,c.h,c.D,c.b],styles:[".fisherman[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;align-items:center}.fisherman[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .fisherman[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:5px}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 4fr 6fr 6fr;padding:10px;align-items:center}.grid-item[_ngcontent-%COMP%]{display:flex;text-align:center;align-content:center;align-items:center;flex-wrap:wrap;justify-content:space-around}"]}),t}()}}]);