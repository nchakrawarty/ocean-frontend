(window.webpackJsonp=window.webpackJsonp||[]).push([[21,20],{"9HyD":function(t,i,e){"use strict";e.d(i,"a",(function(){return d}));var n=e("mrSG"),a=e("AzuR"),s=e("fXoL"),o=e("TEn/"),c=e("ofXK"),r=e("tk/3"),b=e("3Pt+");function l(t,i){if(1&t){const t=s.Nb();s.Mb(0,"ion-card"),s.Mb(1,"ion-card-content"),s.Mb(2,"div",10),s.Mb(3,"div",4),s.Kb(4,"img",11),s.Lb(),s.Mb(5,"div",12),s.ic(6),s.Lb(),s.Mb(7,"div",5),s.Mb(8,"ion-input",13),s.Ub("ionChange",(function(e){s.ec(t);const n=i.index;return s.Wb(2).chngeweight(e,n)})),s.Lb(),s.Lb(),s.Mb(9,"div",5),s.Mb(10,"ion-input",14),s.Ub("ionChange",(function(e){s.ec(t);const n=i.index;return s.Wb(2).chngerate(e,n)})),s.Lb(),s.Lb(),s.Lb(),s.Mb(11,"div"),s.ic(12),s.Lb(),s.Lb(),s.Lb()}if(2&t){const t=i.$implicit;s.zb(6),s.kc(" ",t.name," "),s.zb(6),s.kc(" Total = ",t.total," ")}}function h(t,i){if(1&t){const t=s.Nb();s.Mb(0,"ion-content"),s.Mb(1,"div",1),s.Kb(2,"img",2),s.Mb(3,"h2"),s.ic(4),s.Lb(),s.Mb(5,"h4"),s.ic(6,"#"),s.Mb(7,"span"),s.ic(8),s.Lb(),s.Lb(),s.Lb(),s.Mb(9,"div"),s.Mb(10,"div",3),s.Mb(11,"div",4),s.Kb(12,"span"),s.Lb(),s.Mb(13,"div",5),s.ic(14," Name "),s.Lb(),s.Mb(15,"div",5),s.ic(16," Quantity "),s.Lb(),s.Mb(17,"div",5),s.ic(18," Rate "),s.Lb(),s.Lb(),s.Mb(19,"form",6,7),s.Ub("ngSubmit",(function(){s.ec(t);const i=s.dc(20);return s.Wb().saveData(i)})),s.hc(21,l,13,2,"ion-card",8),s.Mb(22,"ion-button",9),s.ic(23," Save "),s.Lb(),s.Lb(),s.Lb(),s.Lb()}if(2&t){const t=s.dc(20),i=s.Wb();s.zb(4),s.jc(i.fisherman.name),s.zb(4),s.jc(i.fisherman.id),s.zb(13),s.Zb("ngForOf",i.tmp),s.zb(1),s.Zb("disabled",t.invalid)}}let d=(()=>{class t{constructor(t,i,e,n,a){this.modalController=t,this.datePipe=i,this.navParams=e,this.http=n,this.toastController=a,this.weight=[],this.rate=[],this.tmp=[]}ngOnInit(){console.log(this.navParams),this.dataValue=this.navParams,this.http.get(`${a.a.FISHERMAN}/${this.navParams.data[0]}?access_token=${this.navParams.data[1].id}`).subscribe(t=>{console.log(t),this.fisherman=t,this.http.get(`${a.a.WLIST}?access_token=${this.navParams.data[1].id}`).subscribe(t=>{this.wasteItemsList=t,console.log(this.wasteItemsList),this.tempData(this.wasteItemsList)})})}tempData(t){for(var i=0;i<t.length;i++){var e={name:"",weight:NaN,rate:NaN,total:NaN};e.name=t[i].name,this.tmp=this.tmp.concat(e),console.log(t[i])}console.log(this.tmp)}chngeweight(t,i){console.log(t.detail.value,i),this.tmp[i].weight=t.detail.value,this.tmp[i].total=this.tmp[i].weight*this.tmp[i].rate,console.log(this.tmp)}chngerate(t,i){console.log(t.detail.value,i),this.tmp[i].rate=t.detail.value,this.tmp[i].total=this.tmp[i].weight*this.tmp[i].rate,console.log(this.tmp)}saveData(t){console.log(this.tmp);var i=0;this.tmp.forEach(t=>{console.log(t),t.fishermanId=this.fisherman.id,console.log(t),this.http.post(`${a.a.FISHERMAN}/${this.fisherman.id}/wasteCollecteds?access_token=${this.navParams.data[1].id}`,{name:t.name,quantity:t.weight,rate:t.rate,total:t.total,fishermanId:this.fisherman.id}).subscribe(t=>{console.log(t)}),i+=t.total,console.log(t.total)}),this.http.get(`${a.a.FISHERMAN}/${this.navParams.data[0]}/transactions?access_token=${this.navParams.data[1].id}`).subscribe(t=>{console.log(t,t.length),0==t.length?this.http.post(`${a.a.FISHERMAN}/${this.navParams.data[0]}/transactions?access_token=${this.navParams.data[1].id}`,{balance:i,amount:[],fishermanId:this.fisherman.id}).subscribe(t=>{console.log(t)}):this.http.patch(`${a.a.TRANSACTION}/${t[0].id}?access_token=${this.navParams.data[1].id}`,{balance:i+=t[0].balance}).subscribe(t=>{console.log(t)})}),this.closeModalNodata()}closeModalNodata(){return Object(n.a)(this,void 0,void 0,(function*(){console.log("Close"),yield this.modalController.dismiss()}))}}return t.\u0275fac=function(i){return new(i||t)(s.Jb(o.z),s.Jb(c.d),s.Jb(o.A),s.Jb(r.a),s.Jb(o.F))},t.\u0275cmp=s.Db({type:t,selectors:[["app-add-items"]],decls:5,vars:1,consts:[[4,"ngIf"],[1,"fisherman"],["src","../../assets/patient-1.png","width","150px"],[1,"grid-container",2,"border-bottom","1px solid"],[1,"grid-item"],[1,"item-grid"],[3,"ngSubmit"],["form","ngForm"],[4,"ngFor","ngForOf"],["mode","ios","color","primary","size","medium","type","submit","expand","block",3,"disabled"],[1,"grid-container"],["src","../../assets/patient-1.png","width","25px"],[1,"item-grid",2,"padding-left","5px"],["name","weight","type","number","placeholder","Weight","required","",2,"margin-bottom","5px",3,"ionChange"],["name","rate","type","number","placeholder","Rate","required","",2,"margin-bottom","5px",3,"ionChange"]],template:function(t,i){1&t&&(s.Mb(0,"ion-header"),s.Mb(1,"ion-toolbar"),s.Mb(2,"ion-title"),s.ic(3,"Add Items"),s.Lb(),s.Lb(),s.Lb(),s.hc(4,h,24,4,"ion-content",0)),2&t&&(s.zb(4),s.Zb("ngIf",i.fisherman))},directives:[o.j,o.v,o.u,c.j,o.g,b.i,b.e,b.f,c.i,o.b,o.c,o.d,o.l,o.B],styles:[".fisherman[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;align-items:center}.fisherman[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .fisherman[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:5px}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 4fr 6fr 6fr;padding:10px;align-items:center}.grid-item[_ngcontent-%COMP%]{display:flex;text-align:center;align-content:center;align-items:center;flex-wrap:wrap;justify-content:space-around}"]}),t})()}}]);