function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[20,21],{"9HyD":function(t,n,e){"use strict";e.d(n,"a",(function(){return m}));var a=e("mrSG"),i=e("AzuR"),o=e("fXoL"),c=e("TEn/"),s=e("ofXK"),r=e("tk/3"),l=e("3Pt+");function b(t,n){if(1&t){var e=o.Nb();o.Mb(0,"ion-card"),o.Mb(1,"ion-card-content"),o.Mb(2,"div",10),o.Mb(3,"div",4),o.Kb(4,"img",11),o.Lb(),o.Mb(5,"div",12),o.ic(6),o.Lb(),o.Mb(7,"div",5),o.Mb(8,"ion-input",13),o.Ub("ionChange",(function(t){o.ec(e);var a=n.index;return o.Wb(2).chngeweight(t,a)})),o.Lb(),o.Lb(),o.Mb(9,"div",5),o.Mb(10,"ion-input",14),o.Ub("ionChange",(function(t){o.ec(e);var a=n.index;return o.Wb(2).chngerate(t,a)})),o.Lb(),o.Lb(),o.Lb(),o.Mb(11,"div"),o.ic(12),o.Lb(),o.Lb(),o.Lb()}if(2&t){var a=n.$implicit;o.zb(6),o.kc(" ",a.name," "),o.zb(6),o.kc(" Total = ",a.total," ")}}function d(t,n){if(1&t){var e=o.Nb();o.Mb(0,"ion-content"),o.Mb(1,"div",1),o.Kb(2,"img",2),o.Mb(3,"h2"),o.ic(4),o.Lb(),o.Mb(5,"h4"),o.ic(6,"#"),o.Mb(7,"span"),o.ic(8),o.Lb(),o.Lb(),o.Lb(),o.Mb(9,"div"),o.Mb(10,"div",3),o.Mb(11,"div",4),o.Kb(12,"span"),o.Lb(),o.Mb(13,"div",5),o.ic(14," Name "),o.Lb(),o.Mb(15,"div",5),o.ic(16," Quantity "),o.Lb(),o.Mb(17,"div",5),o.ic(18," Rate "),o.Lb(),o.Lb(),o.Mb(19,"form",6,7),o.Ub("ngSubmit",(function(){o.ec(e);var t=o.dc(20);return o.Wb().saveData(t)})),o.hc(21,b,13,2,"ion-card",8),o.Mb(22,"ion-button",9),o.ic(23," Save "),o.Lb(),o.Lb(),o.Lb(),o.Lb()}if(2&t){var a=o.dc(20),i=o.Wb();o.zb(4),o.jc(i.fisherman.name),o.zb(4),o.jc(i.fisherman.id),o.zb(13),o.Zb("ngForOf",i.tmp),o.zb(1),o.Zb("disabled",a.invalid)}}var m=function(){var t=function(){function t(n,e,a,i,o){_classCallCheck(this,t),this.modalController=n,this.datePipe=e,this.navParams=a,this.http=i,this.toastController=o,this.weight=[],this.rate=[],this.tmp=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;console.log(this.navParams),this.dataValue=this.navParams,this.http.get("".concat(i.a.FISHERMAN,"/").concat(this.navParams.data[0],"?access_token=").concat(this.navParams.data[1].id)).subscribe((function(n){console.log(n),t.fisherman=n,t.http.get("".concat(i.a.WLIST,"?access_token=").concat(t.navParams.data[1].id)).subscribe((function(n){t.wasteItemsList=n,console.log(t.wasteItemsList),t.tempData(t.wasteItemsList)}))}))}},{key:"tempData",value:function(t){for(var n=0;n<t.length;n++){var e={name:"",weight:NaN,rate:NaN,total:NaN};e.name=t[n].name,this.tmp=this.tmp.concat(e),console.log(t[n])}console.log(this.tmp)}},{key:"chngeweight",value:function(t,n){console.log(t.detail.value,n),this.tmp[n].weight=t.detail.value,this.tmp[n].total=this.tmp[n].weight*this.tmp[n].rate,console.log(this.tmp)}},{key:"chngerate",value:function(t,n){console.log(t.detail.value,n),this.tmp[n].rate=t.detail.value,this.tmp[n].total=this.tmp[n].weight*this.tmp[n].rate,console.log(this.tmp)}},{key:"saveData",value:function(t){var n=this;console.log(this.tmp);var e=0;this.tmp.forEach((function(t){console.log(t),t.fishermanId=n.fisherman.id,console.log(t),n.http.post("".concat(i.a.FISHERMAN,"/").concat(n.fisherman.id,"/wasteCollecteds?access_token=").concat(n.navParams.data[1].id),{name:t.name,quantity:t.weight,rate:t.rate,total:t.total,fishermanId:n.fisherman.id}).subscribe((function(t){console.log(t)})),e+=t.total,console.log(t.total)})),this.http.get("".concat(i.a.FISHERMAN,"/").concat(this.navParams.data[0],"/transactions?access_token=").concat(this.navParams.data[1].id)).subscribe((function(t){console.log(t,t.length),0==t.length?n.http.post("".concat(i.a.FISHERMAN,"/").concat(n.navParams.data[0],"/transactions?access_token=").concat(n.navParams.data[1].id),{balance:e,amount:[],fishermanId:n.fisherman.id}).subscribe((function(t){console.log(t)})):n.http.patch("".concat(i.a.TRANSACTION,"/").concat(t[0].id,"?access_token=").concat(n.navParams.data[1].id),{balance:e+=t[0].balance}).subscribe((function(t){console.log(t)}))})),this.closeModalNodata()}},{key:"closeModalNodata",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Close"),t.next=3,this.modalController.dismiss();case 3:case"end":return t.stop()}}),t,this)})))}}]),t}();return t.\u0275fac=function(n){return new(n||t)(o.Jb(c.z),o.Jb(s.d),o.Jb(c.A),o.Jb(r.a),o.Jb(c.F))},t.\u0275cmp=o.Db({type:t,selectors:[["app-add-items"]],decls:5,vars:1,consts:[[4,"ngIf"],[1,"fisherman"],["src","../../assets/patient-1.png","width","150px"],[1,"grid-container",2,"border-bottom","1px solid"],[1,"grid-item"],[1,"item-grid"],[3,"ngSubmit"],["form","ngForm"],[4,"ngFor","ngForOf"],["mode","ios","color","primary","size","medium","type","submit","expand","block",3,"disabled"],[1,"grid-container"],["src","../../assets/patient-1.png","width","25px"],[1,"item-grid",2,"padding-left","5px"],["name","weight","type","number","placeholder","Weight","required","",2,"margin-bottom","5px",3,"ionChange"],["name","rate","type","number","placeholder","Rate","required","",2,"margin-bottom","5px",3,"ionChange"]],template:function(t,n){1&t&&(o.Mb(0,"ion-header"),o.Mb(1,"ion-toolbar"),o.Mb(2,"ion-title"),o.ic(3,"Add Items"),o.Lb(),o.Lb(),o.Lb(),o.hc(4,d,24,4,"ion-content",0)),2&t&&(o.zb(4),o.Zb("ngIf",n.fisherman))},directives:[c.j,c.v,c.u,s.j,c.g,l.i,l.e,l.f,s.i,c.b,c.c,c.d,c.l,c.B],styles:[".fisherman[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;align-items:center}.fisherman[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .fisherman[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:5px}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 4fr 6fr 6fr;padding:10px;align-items:center}.grid-item[_ngcontent-%COMP%]{display:flex;text-align:center;align-content:center;align-items:center;flex-wrap:wrap;justify-content:space-around}"]}),t}()}}]);