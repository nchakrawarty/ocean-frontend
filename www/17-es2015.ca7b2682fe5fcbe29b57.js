(window.webpackJsonp=window.webpackJsonp||[]).push([[17,18],{"8I4O":function(t,a,n){"use strict";n.d(a,"a",(function(){return h}));var i=n("mrSG"),s=n("AzuR"),e=n("fXoL"),o=n("TEn/"),c=n("ofXK"),r=n("tk/3"),l=n("3Pt+");function d(t,a){if(1&t){const t=e.Nb();e.Mb(0,"ion-content"),e.Mb(1,"div",1),e.Kb(2,"img",2),e.Mb(3,"h2"),e.ic(4),e.Lb(),e.Mb(5,"h4"),e.ic(6,"#"),e.Mb(7,"span"),e.ic(8),e.Lb(),e.Lb(),e.Lb(),e.Mb(9,"ion-card",3),e.Mb(10,"ion-card-content",4),e.Mb(11,"div"),e.ic(12),e.Lb(),e.Mb(13,"div"),e.ic(14),e.Lb(),e.Lb(),e.Lb(),e.Mb(15,"ion-card"),e.Mb(16,"ion-card-content"),e.Mb(17,"form",5,6),e.Ub("ngSubmit",(function(){e.ec(t);const a=e.dc(18);return e.Wb().addAmount(a)})),e.Kb(19,"ion-input",7),e.Mb(20,"div",8),e.Kb(21,"ion-icon",9),e.Kb(22,"ion-datetime",10),e.Lb(),e.Mb(23,"ion-button",11),e.ic(24," Add transaction "),e.Lb(),e.Lb(),e.Lb(),e.Lb(),e.Lb()}if(2&t){const t=e.dc(18),a=e.Wb();e.zb(4),e.jc(a.fisherman.name),e.zb(4),e.jc(a.fisherman.id),e.zb(4),e.kc(" Paid Rs. ",a.paid," "),e.zb(2),e.kc(" Balance Rs.",a.Balance," "),e.zb(9),e.Zb("disabled",t.invalid)}}let h=(()=>{class t{constructor(t,a,n,i,s){this.modalController=t,this.datePipe=a,this.navParams=n,this.http=i,this.toastController=s,this.weight=[],this.rate=[],this.tmp=[]}ngOnInit(){this.paid=0,console.log(this.navParams),this.dataValue=this.navParams,this.http.get(`${s.a.FISHERMAN}/${this.navParams.data[0]}?access_token=${this.navParams.data[1].id}`).subscribe(t=>{console.log(t),this.fisherman=t}),this.http.get(`${s.a.FISHERMAN}/${this.navParams.data[0]}/wasteCollecteds?access_token=${this.navParams.data[1].id}`).subscribe(t=>{console.log(t),this.wasteCollected=t}),this.http.get(`${s.a.FISHERMAN}/${this.navParams.data[0]}/transactions?access_token=${this.navParams.data[1].id}`).subscribe(t=>{console.log(t),this.transactions=t,this.amount=this.transactions[0].amount,this.transactions.forEach(t=>{t.amount.forEach(t=>{this.paid=this.paid+t.Amount})}),this.Balance=t[0].balance,this.calcttl()})}calcttl(){null!=this.wasteCollected&&null!=this.transactions&&(this.amount=this.transactions[0].amount,this.http.get(`${s.a.FISHERMAN}/${this.navParams.data[0]}/transactions?access_token=${this.navParams.data[1].id}`).subscribe(t=>{console.log(t),this.transactions.forEach(t=>{t.amount.forEach(t=>{this.paid=this.paid+t.Amount})}),this.Balance=t[0].balance}))}addAmount(t){var a;this.amount.push({Amount:t.form.value.Amount,transactionDate:t.form.value.transactionDate}),a=this.transactions[0].balance-t.form.value.Amount,console.log(t.form.value),this.Balance&&this.http.patch(`${s.a.TRANSACTION}/${this.transactions[0].id}?access_token=${this.navParams.data[1].id}`,{balance:a,amount:this.amount}).subscribe(t=>{console.log(t)}),this.closeModalNodata()}closeModalNodata(){return Object(i.a)(this,void 0,void 0,(function*(){console.log("Close"),yield this.modalController.dismiss()}))}}return t.\u0275fac=function(a){return new(a||t)(e.Jb(o.z),e.Jb(c.d),e.Jb(o.A),e.Jb(r.a),e.Jb(o.F))},t.\u0275cmp=e.Db({type:t,selectors:[["app-add-amount"]],decls:5,vars:1,consts:[[4,"ngIf"],[1,"fisherman"],["src","../../assets/patient-1.png","width","150px"],[2,"min-height","50px"],[2,"display","flex","justify-content","space-evenly"],[2,"padding","5px","width","85%",3,"ngSubmit"],["form","ngForm"],["name","Amount","type","number","placeholder","Enter Amount","ngModel","","required","",1,"bg-white","rounded-lg","text-sm","overflow-hidden","mb-3"],[2,"display","flex","align-items","center"],["size","large","name","calendar"],["displayFormat","MMM DD, YYYY","name","transactionDate","placeholder","Date","ngModel",""],["mode","ios","color","primary","size","medium","type","submit","expand","block",3,"disabled"]],template:function(t,a){1&t&&(e.Mb(0,"ion-header"),e.Mb(1,"ion-toolbar"),e.Mb(2,"ion-title"),e.ic(3,"Add Transaction"),e.Lb(),e.Lb(),e.Lb(),e.hc(4,d,25,5,"ion-content",0)),2&t&&(e.zb(4),e.Zb("ngIf",a.fisherman))},directives:[o.j,o.v,o.u,c.j,o.g,o.c,o.d,l.i,l.e,l.f,o.l,o.B,l.d,l.g,l.h,o.k,o.h,o.D,o.b],styles:[".fisherman[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;align-items:center}.fisherman[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .fisherman[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:5px}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 4fr 6fr 6fr;padding:10px;align-items:center}.grid-item[_ngcontent-%COMP%]{display:flex;text-align:center;align-content:center;align-items:center;flex-wrap:wrap;justify-content:space-around}"]}),t})()}}]);